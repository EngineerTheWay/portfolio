---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import Button from "../button/Button.astro";
import Badge from "../badge/Badge.astro";

interface Props {
  entry: CollectionEntry<"projects">;
}
const { entry, icon } = Astro.props as Props;
---

<article class="card-surface p-6 relative flex flex-col h-full">
  {entry.data.icon && (
    <div class="absolute right-4 top-4">
      <Image src={entry.data.icon} alt="" width={24} height={24} aria-hidden="true" />
    </div>
  )}

  <h3 class="text-xl font-semibold text-foreground m-0">
    {entry.data.title}
  </h3>

  {entry.data.techStack && entry.data.techStack.length > 0 && (
    <div class="flex flex-wrap gap-2 mt-3">
      {entry.data.techStack.map((stack) => (
        <Badge>{stack}</Badge>
      ))}
    </div>
  )}

  <p class="mt-3 text-[color:var(--color-text-secondary)]">
    {entry.data.description}
  </p>

<div class="mt-auto pt-6 flex flex-col sm:flex-row gap-3 justify-center">
  <Button
    href={`/projects/${entry.slug ?? entry.id.replace(/\.mdx?$/, "")}/`}
    variant="primary"
    size="lg"
  >
    {entry.data.ctaText ?? "View Case Study"}
  </Button>
  {entry.data.sourceLink && (
    <Button
      href={entry.data.sourceLink}
      variant="secondary"
      size="lg"
      target="_blank"
      rel="noopener noreferrer"
    >
      &lt; Source Code &gt;
    </Button>
  )}
</div>
  
  
</article>
